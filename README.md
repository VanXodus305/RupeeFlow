# âš¡ RupeeFlow - Decentralized EV Charging Platform

<div align="center">

[![Next.js](https://img.shields.io/badge/Next.js-15.4.8-black?logo=next.js&style=flat-square)](https://nextjs.org/)
[![React](https://img.shields.io/badge/React-18+-blue?logo=react&style=flat-square)](https://reactjs.org/)
[![Tailwind CSS](https://img.shields.io/badge/Tailwind%20CSS-3.4.1-38B2AC?logo=tailwind-css&style=flat-square)](https://tailwindcss.com/)
[![Polygon](https://img.shields.io/badge/Polygon-Amoy%20Testnet-8247E5?logo=polygon&style=flat-square)](https://polygon.technology/)
[![Ethers](https://img.shields.io/badge/ethers-%232535A0.svg?style=flat-square&logo=ethers&logoColor=white)](https://docs.ethers.org/)
[![MongoDB](https://img.shields.io/badge/MongoDB-Green?logo=mongodb&style=flat-square)](https://www.mongodb.com/)
[![License](https://img.shields.io/badge/License-MIT-green?style=flat-square)](LICENSE)

### ğŸš€ Revolutionary Blockchain-Powered EV Charging Network for India

The future of EV charging is here. RupeeFlow brings transparent, secure, and efficient charging settlements powered by blockchain technology.

[Demo](https://rupee-flow-v1.vercel.app) â€¢ [Features](#-features) â€¢ [Tech Stack](#-tech-stack) â€¢ [Installation](#-installation)

---

## ğŸŒŸ Overview

RupeeFlow is a cutting-edge decentralized EV charging platform that leverages blockchain technology to provide transparent, instant, and secure charging settlements. Built for India's growing EV ecosystem, it enables seamless charging sessions between vehicle owners and charging station operators with smart contract-based settlements on the Polygon blockchain.

### Why RupeeFlow?

âœ… **Transparent Settlements** - All transactions recorded on blockchain
âœ… **Instant Payments** - Real-time settlement with MetaMask
âœ… **Secure & Trustless** - No intermediaries, cryptographic security
âœ… **Real-time Monitoring** - Live meter readings and session tracking
âœ… **Mobile-First Design** - Works seamlessly on all devices
âœ… **Operator Dashboard** - Full control and analytics for station operators

---

## ğŸ¯ Features

### ğŸ”Œ **For EV Owners**

<table>
<tr>
<td>

- ğŸ”Œ **Start & Stop Charging**

  - One-tap charging initiation
  - Real-time meter readings
  - Battery percentage tracking
  - Live power monitoring

- â±ï¸ **Flexible Charging Modes**

  - Manual control mode
  - Auto-stop by percentage
  - Time-based charging
  - Safety cutoff at 100%

- ğŸ’³ **Instant Settlement**

  - Blockchain-based payments
  - MetaMask integration
  - Real-time cost calculation
  - MATIC to INR conversion

- ğŸ“Š **Session History**
  - Complete charging records
  - Energy consumption details
  - Cost breakdown
  - Settlement status tracking

</td>
<td>

- ğŸ¯ **Smart Charging Features**

  - Target battery optimization
  - Cost prediction
  - Charging analytics
  - Performance metrics

- ğŸ” **Security**

  - Wallet encryption
  - Cryptographic signing
  - Transaction verification
  - Data privacy

- ğŸ“± **Mobile Friendly**

  - Responsive design
  - MetaMask mobile support
  - Touch-optimized UI
  - Offline capability

- ğŸŒ **Multi-Station Support**
  - Station discovery
  - Rate comparison
  - Operator ratings
  - Location tracking

</td>
</tr>
</table>

### ğŸ¢ **For Station Operators**

<table>
<tr>
<td>

- ğŸ“ **Operator Onboarding**

  - Profile creation & verification
  - Station setup wizard
  - Rate configuration
  - Charging capacity management

- ğŸ“ˆ **Dashboard Analytics**
  - Real-time operational metrics
  - Revenue tracking
  - Session management
  - Performance analytics

</td>
<td>

- ğŸ’³ **Settlement Management**

  - Payment receipt tracking
  - Transaction verification
  - Revenue reconciliation
  - Settlement history

- ğŸ”§ **Station Management**
  - Multiple charger setup
  - Live availability status
  - Maintenance scheduling
  - Performance reporting

</td>
</tr>
</table>

---

## ğŸ›  Tech Stack

<div align="center">

### Frontend

![Next.js](https://img.shields.io/badge/-Next.js-black?logo=next.js&logoColor=white&style=for-the-badge)
![React](https://img.shields.io/badge/-React-61DAFB?logo=react&logoColor=black&style=for-the-badge)
![Tailwind CSS](https://img.shields.io/badge/-Tailwind%20CSS-06B6D4?logo=tailwindcss&logoColor=white&style=for-the-badge)
![HeroUI](https://img.shields.io/badge/-HeroUI-000000?logo=heroui&logoColor=white&style=for-the-badge)

### Blockchain & Web3

![Ethers](https://img.shields.io/badge/ethers-%232535A0.svg?style=for-the-badge&logo=ethers&logoColor=white)
![MetaMask](https://img.shields.io/badge/-MetaMask-F6851B?logo=metamask&logoColor=white&style=for-the-badge)
![Polygon](https://img.shields.io/badge/-Polygon-8247E5?logo=polygon&logoColor=white&style=for-the-badge)
![Solidity](https://img.shields.io/badge/-Solidity-363636?logo=solidity&logoColor=white&style=for-the-badge)
![Remix IDE](https://img.shields.io/badge/-Remix%20IDE-1E90FF?logo=remix-ide&logoColor=white&style=for-the-badge)

### Backend & Database

![Node.js](https://img.shields.io/badge/-Node.js-339933?logo=node.js&logoColor=white&style=for-the-badge)
![MongoDB](https://img.shields.io/badge/-MongoDB-47A248?logo=mongodb&logoColor=white&style=for-the-badge)
![Express](https://img.shields.io/badge/-Express-000000?logo=express&logoColor=white&style=for-the-badge)
![Socket.io](https://img.shields.io/badge/-Socket.io-010101?logo=socket.io&logoColor=white&style=for-the-badge)

</div>

### **Core Technologies**

| Component            | Technology             | Version         |
| -------------------- | ---------------------- | --------------- |
| **Framework**        | Next.js with Turbopack | 15.4.8          |
| **Runtime**          | Node.js                | 18+             |
| **UI Library**       | HeroUI (headless)      | Latest          |
| **Styling**          | Tailwind CSS           | 3.4.1           |
| **State Management** | React Hooks            | -               |
| **Web3 Library**     | ethers.js              | v6.16.0         |
| **Smart Contracts**  | Solidity               | 0.8.x           |
| **Blockchain**       | Polygon Amoy Testnet   | Chain ID: 80002 |
| **Database**         | MongoDB                | -               |
| **ODM**              | Mongoose               | -               |
| **Real-time**        | Socket.io              | -               |
| **Authentication**   | NextAuth.js            | -               |
| **Icons**            | React Icons            | -               |

---

## ğŸ“‹ Project Structure

```
RupeeFlow/
â”œâ”€â”€ ğŸ“ public/              # Static assets
â”‚   â”œâ”€â”€ fonts/             # Custom fonts (Conthrax)
â”‚   â””â”€â”€ images/            # Project images
â”œâ”€â”€ ğŸ“ src/
â”‚   â”œâ”€â”€ ğŸ“ app/            # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ ğŸ“ (auth)/     # Protected routes
â”‚   â”‚   â”‚   â”œâ”€â”€ ev-owner-dashboard/
â”‚   â”‚   â”‚   â””â”€â”€ station-dashboard/
â”‚   â”‚   â”œâ”€â”€ ğŸ“ api/        # API routes
â”‚   â”‚   â”‚   â”œâ”€â”€ auth/      # Authentication
â”‚   â”‚   â”‚   â”œâ”€â”€ charging/  # Charging operations
â”‚   â”‚   â”‚   â”œâ”€â”€ operator/  # Operator management
â”‚   â”‚   â”‚   â””â”€â”€ user/      # User management
â”‚   â”‚   â”œâ”€â”€ layout.jsx     # Root layout
â”‚   â”‚   â”œâ”€â”€ page.jsx       # Home page
â”‚   â”‚   â””â”€â”€ globals.css    # Global styles
â”‚   â”œâ”€â”€ ğŸ“ components/     # React components
â”‚   â”‚   â”œâ”€â”€ Navbar.jsx
â”‚   â”‚   â”œâ”€â”€ ChargingTimer.jsx
â”‚   â”‚   â”œâ”€â”€ ChargingSettlement.jsx
â”‚   â”‚   â”œâ”€â”€ WalletWarningBanner.jsx
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ ğŸ“ hooks/          # Custom React hooks
â”‚   â”‚   â”œâ”€â”€ useCharging.js
â”‚   â”‚   â””â”€â”€ useWalletWarning.js
â”‚   â”œâ”€â”€ ğŸ“ lib/            # Utilities
â”‚   â”‚   â””â”€â”€ mongodb.js     # Database connection
â”‚   â”œâ”€â”€ ğŸ“ models/         # Mongoose schemas
â”‚   â”‚   â”œâ”€â”€ User.js
â”‚   â”‚   â”œâ”€â”€ Operator.js
â”‚   â”‚   â””â”€â”€ ChargingSession.js
â”‚   â”œâ”€â”€ ğŸ“ utils/          # Helper functions
â”‚   â”‚   â”œâ”€â”€ contract-interactions.js
â”‚   â”‚   â””â”€â”€ ethers-config.js
â”‚   â”œâ”€â”€ ğŸ“ contexts/       # React contexts
â”‚   â”‚   â””â”€â”€ Provider.jsx
â”‚   â””â”€â”€ auth.js            # NextAuth config
â”œâ”€â”€ ğŸ“ contracts/          # Solidity contracts
â”‚   â””â”€â”€ RupeeFlow.sol      # Main settlement contract
â”œâ”€â”€ ğŸ“ server/             # Backend server
â”‚   â”œâ”€â”€ index.js
â”‚   â”œâ”€â”€ routes.js
â”‚   â”œâ”€â”€ socket-handlers.js
â”‚   â”œâ”€â”€ charging-manager.js
â”‚   â”œâ”€â”€ config.js
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ ğŸ“ docs/               # Documentation
â”œâ”€â”€ ğŸ”§ next.config.mjs
â”œâ”€â”€ ğŸ¨ tailwind.config.js
â”œâ”€â”€ ğŸ“± jsconfig.json
â””â”€â”€ ğŸ“„ package.json
```

---

## ğŸš€ Installation

### Prerequisites

- âœ… Node.js 18+
- âœ… npm or yarn
- âœ… MongoDB instance
- âœ… MetaMask browser extension
- âœ… Polygon Amoy testnet setup

### Step 1: Clone the Repository

```bash
git clone https://github.com/yourusername/rupeeflow.git
cd rupeeflow
```

### Step 2: Install Dependencies

```bash
# Install main dependencies
npm install

# Install server dependencies
cd server
npm install
cd ..
```

---

## ğŸ” Smart Contract

### RupeeFlow.sol Features

```solidity
// Key Functions
- settlement() - Execute charging settlement
- getSessionDetails() - Retrieve session information
- verifyTransaction() - Confirm settlement on-chain
- transferFunds() - Send MATIC to operator
```

### Deployment

#### Using Remix IDE (Recommended)

**Step 1: Open Remix IDE**

```
1. Navigate to https://remix.ethereum.org/
2. Create a new file: contracts/RupeeFlow.sol
3. Copy the entire RupeeFlow.sol contract code
```

**Step 2: Compile Contract**

```
1. Go to Solidity Compiler (left sidebar)
2. Select compiler version: 0.8.19 or compatible
3. Click "Compile RupeeFlow.sol"
4. Ensure no compilation errors
```

**Step 3: Deploy to Polygon Amoy**

```
1. Go to Deploy & Run Transactions (left sidebar)
2. Select Environment: "Injected Provider - MetaMask"
3. Ensure MetaMask is connected to Polygon Amoy testnet
4. Chain ID should be: 80002
5. Select "RupeeFlow" contract from dropdown
6. Click "Deploy"
7. Approve MetaMask transaction
8. Wait for confirmation
```

**Step 4: Get Contract Address**

```
1. Copy the contract address from deployment receipt
2. Update environment variable: NEXT_PUBLIC_RUPEEFLOW_ADDRESS
3. Verify on PolygonScan: https://amoy.polygonscan.com/
```

**Step 5: Verify Contract (Optional)**

```
1. Go to https://amoy.polygonscan.com/
2. Search for deployed contract address
3. Click "Verify and Publish"
4. Select Solidity compiler version: 0.8.19
5. Paste contract source code
6. Click "Verify and Publish"
```

#### Using Hardhat (Alternative)

```bash
# Install Hardhat
npm install --save-dev hardhat @nomicfoundation/hardhat-toolbox

# Initialize Hardhat project
npx hardhat init

# Compile contract
npx hardhat compile

# Deploy to Polygon Amoy
npx hardhat run scripts/deploy.js --network amoy
```

---

## ğŸ”Œ API Endpoints

### Authentication

- `POST /api/auth/[...nextauth]` - NextAuth.js endpoints
- `POST /api/auth/credentials-signin` - Credentials login
- `POST /api/auth/google-signin` - Google OAuth

### Charging Operations

- `POST /api/charging/start` - Start charging session
- `POST /api/charging/stop` - Stop charging session
- `POST /api/charging/save-session` - Save session to DB
- `POST /api/charging/settle` - Settle with blockchain
- `GET /api/charging/history` - Get charging history
- `GET /api/charging/ongoing` - Get active sessions

### User Management

- `GET /api/user/profile` - Get user profile
- `GET /api/user/profile/[id]` - Get specific user
- `PUT /api/user/profile` - Update user profile

### Operator Management

- `POST /api/operator/create` - Register new operator
- `GET /api/operator/list` - List all operators
- `GET /api/operator/profile` - Get operator profile
- `GET /api/operator/check` - Check operator status
- `GET /api/operator/charging-history` - Get settlement history

---

## ğŸ¯ Key Features in Detail

### âš¡ Real-Time Meter Readings

- Live WebSocket updates via Socket.io
- Battery percentage tracking
- Energy consumption (kWh) monitoring
- Current power draw (kW) display
- Session duration tracking

### ğŸ’° Smart Settlement System

- Automatic cost calculation
- Gas fee estimation
- MATIC to INR conversion
- Transaction status tracking
- Receipt generation

### ğŸ” Security Features

- MetaMask wallet integration
- Transaction signing required
- Session validation
- Database transaction logging
- Blockchain verification

### ğŸ“± Mobile Optimization

- MetaMask Mobile deep linking
- Responsive design (Mobile-first)
- Touch-optimized UI
- Fast load times with Turbopack

### ğŸ¨ User Experience

- Animated transitions
- Loading states with spinners
- Error handling with user-friendly messages
- Success confirmations
- Real-time status updates

---

## ğŸ“Š Performance Optimizations

âœ… **Batched State Updates** - Reduced re-renders by 80%
âœ… **React.memo() Components** - Prevented unnecessary renders
âœ… **Socket.io Optimization** - Efficient real-time updates
âœ… **Turbopack** - Lightning-fast builds and HMR
âœ… **Image Optimization** - Automatic Next.js optimization
âœ… **CSS Optimization** - Tailwind purge for minimal bundle

---

## ğŸ¤ Contributing

We love contributions! Please follow these steps:

1. **Fork** the repository
2. **Create** a feature branch (`git checkout -b feature/amazing-feature`)
3. **Commit** your changes (`git commit -m 'Add amazing feature'`)
4. **Push** to the branch (`git push origin feature/amazing-feature`)
5. **Open** a Pull Request

## ğŸ› Troubleshooting

### MetaMask Connection Issues

- âœ… Ensure MetaMask is installed and unlocked
- âœ… Switch to Polygon Amoy testnet (Chain ID: 80002)
- âœ… Add test MATIC from [faucet](https://faucet.polygon.technology/)

### Database Connection Errors

- âœ… Verify MongoDB URI is correct
- âœ… Check network access in MongoDB Atlas
- âœ… Ensure IP whitelist includes your address

### Transaction Failures

- âœ… Check sufficient MATIC balance for gas
- âœ… Verify RPC endpoint is working
- âœ… Check transaction gas limit

---

## ğŸ“ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

---

## ğŸš€ Roadmap

- [ ] Multi-chain support (Ethereum, Arbitrum, Optimism)
- [ ] Mobile app (iOS & Android)
- [ ] Advanced analytics dashboard
- [ ] P2P charging network
- [ ] Integration with major EV models
- [ ] Subscription plans
- [ ] International expansion

---

<div align="center">

### Built with â¤ï¸ for the EV Revolution

â­ **If you find this project useful, please consider giving it a star!**

**Made by the RupeeFlow Team**

</div>
